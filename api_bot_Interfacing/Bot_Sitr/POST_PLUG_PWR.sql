USE gpu_bot_sitr


IF OBJECT_ID('POST_PLUG_PWR') IS NOT NULL
DROP PROC POST_PLUG_PWR
GO
CREATE PROC POST_PLUG_PWR @_EWELINK_ID varchar(15),@_ONLINE BIT, @_PWR_CNSMPTN decimal(7, 3)
AS
-- @_ONLINE = 1 = ONLINE ----- 0 = OFFLINE
DECLARE @_PLG_ID INT = (SELECT PLUG_ID FROM PLGS WHERE EWELINK_PLG_ID = @_EWELINK_ID)
IF @_ONLINE = 0 SET @_PWR_CNSMPTN = 0.0;
INSERT INTO PWR_PLG_TBL(PLUG_ID,ONLINE,POWER_CONSMPTN)
	VALUES(@_PLG_ID,@_ONLINE,@_PWR_CNSMPTN)
SELECT @@IDENTITY



--EXEC POST_PLUG_PWR  '10011f9496',TRUE, '813.71'
--EXEC POST_PLUG_PWR  '10014908f4',TRUE, '510.49'
--EXEC POST_PLUG_PWR  '1001490d88',TRUE, '368.27'
--EXEC POST_PLUG_PWR  '10012aa8ed',TRUE, '845.66'
--EXEC POST_PLUG_PWR  '10012aa1f6',TRUE, '1035.64'
--EXEC POST_PLUG_PWR  '10012a9ff5',TRUE, '1014.25'
--EXEC POST_PLUG_PWR  '10011f948a',TRUE, '1172.46'
--EXEC POST_PLUG_PWR  '10012aa914',TRUE, '112.20'
--EXEC POST_PLUG_PWR  '10012aa91c',TRUE, '846.23'
--EXEC POST_PLUG_PWR  '10012aa1d0',TRUE, '995.08'
